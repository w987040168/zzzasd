"use strict";function asyncGeneratorStep(t,n,e,a,r,o,i){try{var s=t[o](i),c=s.value}catch(t){return void e(t)}s.done?n(c):Promise.resolve(c).then(a,r)}function _asyncToGenerator(s){return function(){var t=this,i=arguments;return new Promise(function(n,e){var a=s.apply(t,i);function r(t){asyncGeneratorStep(a,n,e,r,o,"next",t)}function o(t){asyncGeneratorStep(a,n,e,r,o,"throw",t)}r(void 0)})}}$(function(){var a={cat_one:"all",cat_two:"all",sort_method:"综合",sort_type:"ASC",current:1,pagesize:12};function t(){return(t=_asyncToGenerator(regeneratorRuntime.mark(function t(){var n,e;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,$.get("../server/getCateOne.php",null,null,"json");case 2:n=t.sent,e='<span data-type="all" class="active">全部</span>',n.list.forEach(function(t){e+='\n            <span data-type="'.concat(t.cat_one_id,'">').concat(t.cat_one_id,"</span>\n            ")}),$(".body-header-fenlei-list").html(e);case 6:case"end":return t.stop()}},t)}))).apply(this,arguments)}!function(){t.apply(this,arguments)}();var r=null;function e(){return n.apply(this,arguments)}function n(){return(n=_asyncToGenerator(regeneratorRuntime.mark(function t(){var n,e;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,$.get("../server/getGoodsList.php",a,null,"json");case 2:n=t.sent,r=n.list,console.log(r),e="",r.forEach(function(t){e+='\n            <div class="body-list-item">\n                <div class="body-list-item-img" data-id="'.concat(t.goods_id,'">\n                    <img src="').concat(t.goods_big_logo,'" alt="">\n                </div>\n                <div class="body-list-item-miaosu">\n                    <span>').concat(t.cat_one_id,'</span>\n                </div>\n                <div class="body-list-item-name" data-id="').concat(t.goods_id,'">\n                ').concat(t.goods_name,'\n                </div>\n                <div class="body-list-item-price">\n                    <span>￥').concat(t.goods_price,'</span>\n                    <span class="addCart" data-id="').concat(t.goods_id,'">加入购物车</span>\n                </div>\n            </div>\n            ')}),$(".body-list").html(e);case 8:case"end":return t.stop()}},t)}))).apply(this,arguments)}function o(){return i.apply(this,arguments)}function i(){return(i=_asyncToGenerator(regeneratorRuntime.mark(function t(){var n;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,$.get("../server/getTotalPage.php",a,null,"json");case 2:n=t.sent,$(".m-style").pagination({pageCount:n.total,callback:function(t){a.current=t.getCurrent(),e()}});case 4:case"end":return t.stop()}},t)}))).apply(this,arguments)}e(),o(),$(".body-header-fenlei-list").on("click","span",function(){$(this).addClass("active").siblings().removeClass("active");var t=$(this).data("type");a.cat_one=t,a.current=1,e(),o()}),$(".body-header-paixu-list ").on("click","span",function(){var t=$(this).attr("data-type"),n=$(this).attr("data-method");$(this).addClass("active").siblings().removeClass("active"),a.sort_type=t,a.sort_method=n,e(),o(),$(this).attr("data-type","ASC"===t?"DESC":"ASC").siblings().attr("data-type","ASC")}),$(".body-list").on("click",".body-list-item-img",function(){var t=$(this).data("id");setCookie("good_id",t),window.location.href="../pages/detail.html"}),$(".body-list").on("click",".addCart",function(){var t,n=JSON.parse(window.localStorage.getItem("cart"))||[],e=$(this).data("id");n.some(function(t){return t.goods_id==e})?(t=n.filter(function(t){return t.goods_id==e})[0]).cart_number=+t.cart_number+1:((t=r.filter(function(t){return t.goods_id==e})[0]).cart_number=1,n.push(t)),window.localStorage.setItem("cart",JSON.stringify(n))})});