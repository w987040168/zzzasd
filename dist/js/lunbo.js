"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function _createClass(e,t,i){return t&&_defineProperties(e.prototype,t),i&&_defineProperties(e,i),e}var Banner=function(){function t(e){_classCallCheck(this,t),this.ele=document.querySelector(e),this.imgbox=this.ele.querySelector(".imgbox"),this.pointbox=this.ele.querySelector(".pointbox"),this.leftright=this.ele.querySelector(".leftright"),this.li=this.ele.querySelector(".pointbox li"),this.box_width=parseInt(window.getComputedStyle(this.ele).width),this.index=1,this.timer=0,this.init(),this.flag=!0}return _createClass(t,[{key:"init",value:function(){this.setPoint(),this.copyEle(),this.autoPlay(),this.overOut(),this.pointEvent(),this.changePage()}},{key:"setPoint",value:function(){for(var e=this.imgbox.children.length,t=document.createDocumentFragment(),i=0;i<e;i++){var n=document.createElement("li");0===i&&(n.className="active"),n.setAttribute("point_index",i),t.appendChild(n)}this.pointbox.appendChild(t),this.pointbox.style.width=12*e*2+"px"}},{key:"copyEle",value:function(){var e=this.imgbox.firstElementChild.cloneNode(!0),t=this.imgbox.lastElementChild.cloneNode(!0);this.imgbox.appendChild(e),this.imgbox.insertBefore(t,this.imgbox.firstElementChild),this.imgbox.style.width=this.box_width*this.imgbox.children.length+"px",this.imgbox.style.left=-this.index*this.box_width+"px"}},{key:"autoPlay",value:function(){var e=this;this.timer=setInterval(function(){e.index++,move(e.imgbox,{left:-e.index*e.box_width},e.moveEnd.bind(e))},2e3)}},{key:"moveEnd",value:function(){this.index===this.imgbox.children.length-1&&(this.index=1,this.imgbox.style.left=-this.index*this.box_width+"px"),0===this.index&&(this.index=this.imgbox.children.length-2,this.imgbox.style.left=-this.index*this.box_width+"px");for(var e=0;e<this.pointbox.children.length;e++)this.pointbox.children[e].classList.remove("active");this.pointbox.children[this.index-1].classList.add("active"),this.flag=!0}},{key:"overOut",value:function(){var e=this;this.ele.addEventListener("mouseover",function(){clearInterval(e.timer)}),this.ele.addEventListener("mouseout",function(){e.autoPlay()})}},{key:"pointEvent",value:function(){var t=this;this.pointbox.addEventListener("click",function(e){e=(e=e||window.event).target||e.srcElement;"LI"===e.nodeName&&t.flag&&(t.flag=!1,e=+e.getAttribute("point_index"),t.index=1+e,move(t.imgbox,{left:-t.index*t.box_width},t.moveEnd.bind(t)))})}},{key:"leftrightbox",value:function(){var t=this;this.leftright.addEventListener("click",function(e){e=(e=e||window.event).target||e.srcElement;if("left"===e.className){if(!t.flag)return;t.flag=!1,t.index--,move(t.imgbox,{left:-t.index*t.box_width},t.moveEnd.bind(t))}"right"===e.className&&t.flag&&(t.flag=!1,t.index++,move(t.imgbox,{left:-t.index*t.box_width},t.moveEnd.bind(t)))})}},{key:"changePage",value:function(){var t=this;document.addEventListener("visibilitychange",function(){var e=document.visibilityState;"hidden"===e&&clearInterval(t.timer),"visible"===e&&t.autoPlay()})}}]),t}();